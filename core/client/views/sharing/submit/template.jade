h1 Submit your link
form(name="form"
  ng-class="formClasses"
  ng-init="showGuidlines = false; showMarkdown = false; selectedCats = 0").row
  .columns
    .row.collapse
      .columns
        input.url.field(ng-model="story.url"
          ng-disabled="formLoading"
          placeholder="URL *"
          type="url"
          required)

      .columns(ng-if="story.url", class="{{ form.$valid ? '' : 'medium-10' }}")
        input.title.field(ng-model="story.title"
          ng-disabled="formLoading"
          placeholder="Title *"
          minlength="10"
          maxlength="255"
          required)
      .columns.medium-2.get-title-container(ng-if="story.url && !form.$valid")
        button(ng-click="getTitle()") Get Title

      .columns.category-selector(ng-if="story.url && selectedCats < 3")
        .title Choose upto 3 categories
        .options
          //- span()
          sharing-category(ng-model="cat"
            ng-repeat="cat in categories | orderBy : 'slug'"
            ng-if="cat.select != true"
            ng-click="select(cat)")

      .columns.category-selected(ng-if="story.url")
        .title Selected categories
        .options
            sharing-category(ng-model="cat"
              ng-repeat="cat in categories | orderBy : 'slug'"
              ng-if="cat.select == true"
              ng-click="deselect(cat)")

      .columns(ng-if="story.url")
        textarea(placeholder="Optional description when submitting a URL; please see guidelines",
          maxlength="3000"
          ng-model="story.description", ng-disabled="formLoading")

  a.guidlines.columns.medium-6(ng-click="showGuidlines = !showGuidlines")
    span(ng-if="story.url") Submission guidlines
  a.markdown.columns.medium-6(ng-click="showMarkdown = !showMarkdown")
    span(ng-if="story.url") Markdown formatting help

  .columns(ng-if="showGuidlines")
    ul
      //- li
        p
          | To be able to easily submit a page you're viewing in your browser
          | to Example sharing, drag the bookmarklet to the righ-t
          | to your bookmark bar.  You'll be taken to this page with the viewed
          | page's URL and title.

      li
        p
          | When submitting a URL, the text field is optional and should only
          | be used when additional context or explanation of the URL is
          | needed.  Commentary or opinion should be reserved for a comment,
          | so that it can be voted on separately from the story.

      li
        p
          | Do not editorialize link titles, but when the original link's
          | title has no context or is unclear, please change it.  <strong>Please
          | remove extraneous components from titles such as the name of the
          | site or section.</strong>

      li
        p
          | If no tags clearly apply to the link you are submitting, chances
          | are it does not belong here.  Do not overreach with tags if they
          | are not the primary focus of the link.
      li
        p
          | When the link being submitted is more than a year or so old,
          | please add the year the link was written to the post title in
          | parentheses.


  .markdown_help.columns(ng-if="showMarkdown")
    table
      tr
        td(width='125')
          em emphasized text
        td
          | surround text with
          tt *asterisks*
      tr
        td
          strong strong text
        td
          | surround text with
          tt **two asterisks**
      tr
        td
          strike struck-through
        td
          | surround text with
          tt ~~two tilde characters~~
      tr
        td
          tt fixed width
        td
          | surround text with
          tt &grave;backticks&grave;
      tr
        td
          a(href='http://example.com/', style='color: inherit;') linked text
        td
          tt [linked text](http://example.com/) or just a bare URL to create without a title
      tr
        td
          blockquote  quoted text
        td
          | prefix text with
          tt &gt;
      tr
        td
          pre(style='margin: 0px;').
            \npre
              text
        td
          | prefix text with at least
          tt &nbsp;&nbsp;&nbsp;&nbsp;4 spaces
      tr
        td (inline image)

        td
          tt ![alt text](http://example.com/image.jpg) (only allowed in link text)


  .columns(ng-if="selectedCats >= 1 && form.$valid")
    div(google-recaptcha, ng-model="form.gcaptcha", ng-if="!form.gcaptcha")
    button(ng-click="submit(story)", ng-if="form.gcaptcha") Submit