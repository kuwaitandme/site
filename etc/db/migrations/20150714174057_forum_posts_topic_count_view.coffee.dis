exports.up = (knex, Promise) ->
  knex.raw "CREATE VIEW forum_posts_topic_count_view AS
    SELECT
      t.id as topic,
      count(p.id) as posts_count
      FROM forum_topics AS t, forum_posts AS p
      WHERE t.id = p.topic
      GROUP BY t.id"


exports.down = (knex, Promise) -> knex.raw "DROP VIEW forum_posts_topic_count_view"
